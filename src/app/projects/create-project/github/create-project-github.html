<!--

    Copyright (c) 2015 Codenvy, S.A.
    All rights reserved. This program and the accompanying materials
    are made available under the terms of the Eclipse Public License v1.0
    which accompanies this distribution, and is available at
    http://www.eclipse.org/legal/epl-v10.html

    Contributors:
      Codenvy, S.A. - initial API and implementation

-->
<form name="createProjectGitHubForm">
  <div class="create-project-github-panel" layout="row" flex ng-init="createProjectCtrl.setForm(createProjectGitHubForm, 'github');"></div>


  <p ng-if="createProjectGithubCtrl.state == 'LOAD_ERROR'" class="alert alert-danger" style="margin-bottom: 15px">
    We have a problem authenticating you with GitHub.
  </p>

  <button type="button" class="btn btn-primary" ng-click="createProjectGithubCtrl.authenticateWithGitHub()" ng-if="createProjectGithubCtrl.state != 'LOADING' && createProjectGithubCtrl.state != 'LOADED'">Load your GitHub repositories</button>

  <div ng-if="createProjectGithubCtrl.state == 'LOADED'">
    <div layout="row" layout-align="space-around center">

      <div layout="row" flex="45">
        <md-icon flex-gt-sm="5" md-font-icon="fa fa-search"></md-icon>
        <input id="nameFilter" flex ng-model="createProjectGithubCtrl.repositoryName" type="text" placeholder="Start typing here">
      </div>
      <div layout="row" flex="45">
        <select flex id="organizationFilter" class="github-create-project-select" ng-model="createProjectGithubCtrl.organizationName" ng-options="createProjectGithubCtrl.resolveOrganizationName(organization) group by createProjectGithubCtrl.resolveOrganizationType(organization) for organization in createProjectGithubCtrl.organizations">
          <option value="">All Organizations</option>
        </select>
      </div>
    </div>

    <cdvy-list>
      <cdvy-list-item ng-repeat="gitHubRepository in createProjectGithubCtrl.gitHubRepositories | githubFilterRepositories:createProjectGithubCtrl.organizationName:createProjectGithubCtrl.repositoryName | orderBy:'name'"
                      ng-click="createProjectGithubCtrl.selectRepository(gitHubRepository); createProjectCtrl.selectGitHubRepository(gitHubRepository)" flex-gt-sm="100" flex="33" ng-class="{'github-create-project-active' : gitHubRepository == createProjectGithubCtrl.selectedRepository}">
          <div class="github-create-project" layout-gt-sm="row" flex="100" layout="column" layout-align="start center" >
            <div layout="row" class="icons">
              <span ng-if="!gitHubRepository.fork" class="fa fa-folder"></span>
              <span ng-if="gitHubRepository.fork" class="fa fa-code-fork" title="forked"></span>
              <span ng-if="gitHubRepository.private" class="repo-private fa fa-lock" title="private"></span>
            </div>

            <div layout="column" flex="40">
              <h2>{{gitHubRepository.name}}</h2>
              <h4>{{gitHubRepository.description}}</h4>
            </div>

            <div layout="row" hide-lg hide-md hide-sm flex-gt-md="30">
              <span>{{gitHubRepository.clone_url}}</span>
            </div>


          </div>
      </cdvy-list-item>
    </cdvy-list>




  </div>
</form>
